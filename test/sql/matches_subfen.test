# name: test/sql/matches_subfen.test
# description: test matches_subfen function
# group: [sql]


require aixchess


query I
SELECT matches_subfen('\x9F-\x84\x1C\x1A\x9D:\xBD\xB3\xB8'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1N1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
true


query I
SELECT matches_subfen('\x0C\x1C4$\x05\x1A9*\x06\x151)\x04\x07>-\x0A\x12=\x22\x9A5\xBC5\x15&5>\x03\x11-#\x91#>=#5\x00'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1N1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
true


query I
SELECT matches_subfen('<]\x93.\x0DT?\xE2\xEC\xDE\xEFaFR\x973\xDB\x03v'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1N1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
true


query I
SELECT TRY(matches_subfen('invalid'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1N1/4P3/1QP5/PP1P1PPP/RNB2RK1'));
----
NULL


query I
SELECT matches_subfen('\x9F-\x84\x1C\x1A\x9D:\xBD\xB3\xB8'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1n1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
false


query I
SELECT matches_subfen('\x0C\x1C4$\x05\x1A9*\x06\x151)\x04\x07>-\x0A\x12=\x22\x9A5\xBC5\x15&5>\x03\x11-#\x91#>=#5\x00'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1n1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
false


query I
SELECT matches_subfen('<]\x93.\x0DT?\xE2\xEC\xDE\xEFaFR\x973\xDB\x03v'::BLOB, 'r1bq2kr/p1pp2pp/1pn2n2/2b1p1n1/4P3/1QP5/PP1P1PPP/RNB2RK1');
----
false
